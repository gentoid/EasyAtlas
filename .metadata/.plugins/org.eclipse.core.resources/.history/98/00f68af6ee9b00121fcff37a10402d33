package ru.osm.dkiselev.atlasgenerator;

public class MapRasterDataSource {
	
	private int dpi;
	private String wmsURL;
	private int widthPX;
	private int heightPX;
	
	public MapRasterDataSource(int dpi, String wmsURL, int widthPX, int heightPX) {
		this.dpi = dpi;
		this.wmsURL = wmsURL;
	}

	public byte[] loadImage(GridCell c) {
		String url = getURL(c);
		return null;
	}

	private String getURL(GridCell c) {
		StringBuilder sb = new StringBuilder(wmsURL);
		
		sb.append("bbox=");
		sb.append(c.getBbox().getLeft());
		sb.append(",");
		sb.append(c.getBbox().getBottom());
		sb.append(",");
		sb.append(c.getBbox().getRight());
		sb.append(",");
		sb.append(c.getBbox().getTop());
		
		sb.append("&dpi=").append(dpi);

		sb.append("&service=WMS");
		sb.append("&request=GetMap");
		sb.append("&version=1.1.1");
		sb.append("&layers=bw");
		sb.append("&format=image/png");
		sb.append("&height=").append(b);
		
		
		return sb.toString();
	}
	
	
}
